<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>BSTA 550 – hw8</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">BSTA 550</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../syllabus.html" rel="" target="" aria-current="page">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule1.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../readings.html" rel="" target="">
 <span class="menu-text">Readings</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../homeworks.html" rel="" target="">
 <span class="menu-text">Homeworks</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Course Info</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../instructors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instructors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../schedule1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Course Materials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../class_slides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Class Slides</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../homeworks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homeworks</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<div class="center">
<p>Homework #8</p>
<p>BSTA 550</p>
<p>Due: Sunday, November 28, 2021</p>
</div>
<p>Complete all of the problems listed below. Only turn in the ones listed in the “Turn In" column. Please submit problems in the order they are listed.</p>
<p><em>You must show all of your work to receive credit. Don’t forget to define every r.v. you use!</em> <em>In particular, <strong>if a similar problem was done in class or an example in the book, make sure to still show every step in the solution and not just cite the examples’ results</strong>.</em></p>
<div class="center">
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Chapter</th>
<th style="text-align: center;">Turn In</th>
<th style="text-align: center;">Extra Problems</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">28</td>
<td style="text-align: center;"># 18</td>
<td style="text-align: center;"># <span class="math inline">\(1, 10\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">29 *</td>
<td style="text-align: center;"># 26, NTB <a href="#Ch29ExpRV" data-reference-type="ref" data-reference="Ch29ExpRV">[Ch29ExpRV]</a>, <a href="#Ch29UnifWaitingTime" data-reference-type="ref" data-reference="Ch29UnifWaitingTime">[Ch29UnifWaitingTime]</a></td>
<td style="text-align: center;"># <span class="math inline">\(10, 14, 23, 11, 13, 32\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">30</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"># 4, 7-12</td>
</tr>
<tr class="even">
<td style="text-align: center;">31</td>
<td style="text-align: center;"># 18</td>
<td style="text-align: center;"># <span class="math inline">\(13, 14, 17\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">32</td>
<td style="text-align: center;"># 8</td>
<td style="text-align: center;"># <span class="math inline">\(3, 5, 10^{**}, 15\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">33</td>
<td style="text-align: center;">NTB <a href="#Ch33PoissonProcess" data-reference-type="ref" data-reference="Ch33PoissonProcess">[Ch33PoissonProcess]</a></td>
<td style="text-align: center;"># <span class="math inline">\(3, 9, 10\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">35</td>
<td style="text-align: center;"># 10, NTB # <a href="#Ch35_Normal_Parachute" data-reference-type="ref" data-reference="Ch35_Normal_Parachute">[Ch35_Normal_Parachute]</a></td>
<td style="text-align: center;"># 6, 9, 24</td>
</tr>
</tbody>
</table>
</div>
<p>* I recommend doing the Chapter 29 Extra Problems in the order listed.</p>
<p>** Assume <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> are independent.</p>
<hr>
<p>Non-textbook problems (NTB): <span id="NTB" label="NTB"></span></p>
<ol type="1">
<li><p><span id="Ch29ExpRV" label="Ch29ExpRV"></span> Let <span class="math inline">\(f_X(x)=\lambda e^{-\lambda x}\)</span> for <span class="math inline">\(x&gt;0\)</span>, where <span class="math inline">\(\lambda&gt;0\)</span>.</p>
<ol type="1">
<li>Show <span class="math inline">\(Var[X]=\frac{1}{\lambda^2}\)</span>. You may use the result from class for <span class="math inline">\(\mathbb{E}[X]\)</span> without first proving it.</li>
</ol></li>
<li><p><span id="Ch29_SumsRV" label="Ch29_SumsRV"></span> A shipping company handles containers in three different sizes: (1) 27 <span class="math inline">\(ft^3\)</span> (3 x 3 x 3), (2) 125 <span class="math inline">\(ft^3\)</span>, and (3) 512 <span class="math inline">\(ft^3\)</span>. Let <span class="math inline">\(X_i\)</span> (<span class="math inline">\(i = 1, 2, 3\)</span>) denote the number of type <span class="math inline">\(i\)</span> containers shipped during a given week. Suppose that <span class="math inline">\(\mu_1 =200,\sigma_1=10,\mu_2 =250,\sigma_2=12,\mu_3 =100,\sigma_3=8\)</span>.</p>
<ol type="1">
<li><p>Assuming that <span class="math inline">\(X_1,X_2,X_3\)</span> are independent, calculate the expected value and variance of the total volume shipped.</p></li>
<li><p>Would your calculations necessarily be correct if the <span class="math inline">\(X_i\)</span>’s were not independent? Explain.</p></li>
</ol></li>
<li><p><span id="Ch29UnifWaitingTime" label="Ch29UnifWaitingTime"></span> Suppose your waiting time for a bus in the morning is uniformly distributed on [0, 8] (minutes), whereas waiting time in the evening is uniformly distributed on [0, 10] (minutes) independent of morning waiting time. <em>Make sure to FIRST set up an equation for calculating the total waiting time in each question before calculating the mean and variance of the total waiting time.</em> <em>You may use results from class for the expected value and variance of uniform r.v.’s without proving them</em></p>
<ol type="1">
<li><p>If you take the bus each morning and evening for a week (7 days), what is your total expected waiting time?</p></li>
<li><p>What is the variance of your total waiting time?</p></li>
<li><p>What are the expected value and variance of the difference between morning and evening waiting times on a given day?</p></li>
<li><p>What are the expected value and variance of the difference between total morning waiting time and total evening waiting time for a particular week?</p></li>
</ol></li>
<li><p><span id="Ch33PoissonProcess" label="Ch33PoissonProcess"></span> Suppose that voters arrive at a polling station at the rate of 120 per hour.For each of the following parts, <u>give the name and parameter(s) of the distribution</u> to be used to model the event and <u>set up the expression</u> to find the specified probability.<em>You do not need to compute the probability.</em></p>
<ol type="1">
<li><p>The probability that the next voter will arrive in less than 30 seconds.</p></li>
<li><p>The probability that 200 voters will arrive within two hours of each other.</p></li>
<li><p>The probability that the <span class="math inline">\(50^{th}\)</span> voter will arrive in between 15 and 30 minutes.</p></li>
</ol></li>
<li><p><span id="Ch35_Normal_Parachute" label="Ch35_Normal_Parachute"></span>The automatic opening device of a military cargo parachute has been designed to open when the parachute is 200 m above the ground. Suppose opening altitude actually has a normal distribution with mean value 200 m and standard deviation 30 m. Equipment damage will occur if the parachute opens at an altitude of less than 100 m. What is the probability that there is equipment damage to the payload of at least one of the five independentIy dropped parachutes?</p></li>
</ol>
<hr>
<p>Selected answers (or hints) not provided at the end the book:</p>
<ul>
<li><p><span id="ANS_28" label="ANS_28"></span></p>
<ul>
<li><p>(a) 8/9 &nbsp;&nbsp;&nbsp;&nbsp;(b) 14/3 &nbsp;&nbsp;&nbsp;&nbsp;</p></li>
<li><p>4/5</p></li>
</ul></li>
<li><p><span id="ANS_29" label="ANS_29"></span></p>
<ul>
<li><p>(a) 26/81 &nbsp;&nbsp;&nbsp;&nbsp;(b) 74/9</p></li>
<li><p>(a) 67/3 &nbsp;&nbsp;&nbsp;&nbsp;(b) 1/14 &nbsp;&nbsp;&nbsp;&nbsp;(c) 25/12 &nbsp;&nbsp;&nbsp;&nbsp;(d) <span class="math inline">\(\sqrt{25/12}\)</span></p></li>
<li><p>250</p></li>
<li><p>See notes (or book) for the proof from the discrete random variables case. The proof doesn’t depend on what type of random variable (discrete vs.&nbsp;continuous) is being used.</p></li>
<li><p>(a) 63 &nbsp;&nbsp;&nbsp;&nbsp;(b) 287/3 &nbsp;&nbsp;&nbsp;&nbsp;(c) -1, 41/3 &nbsp;&nbsp;&nbsp;&nbsp;(d) -7, 287/3</p></li>
</ul></li>
<li><p><span id="ANS_30" label="ANS_30"></span></p>
<ul>
<li><p><span class="math inline">\(f_x(x)=1/2\)</span> for <span class="math inline">\(2\leq x\leq 4\)</span></p></li>
<li><p>(a) T &nbsp;&nbsp;&nbsp;&nbsp;(b) T &nbsp;&nbsp;&nbsp;&nbsp;(c) F</p></li>
<li><p>(a) F &nbsp;&nbsp;&nbsp;&nbsp;(b) T</p></li>
<li><p>(a) T &nbsp;&nbsp;&nbsp;&nbsp;(b) T &nbsp;&nbsp;&nbsp;&nbsp;(c) F &nbsp;&nbsp;&nbsp;&nbsp;(d) T</p></li>
</ul></li>
<li><p><span id="ANS_31" label="ANS_31"></span></p>
<ul>
<li><p>(a) 0.25 &nbsp;&nbsp;&nbsp;&nbsp;(b) 0.02887 &nbsp;&nbsp;&nbsp;&nbsp;(c) 0.063 &nbsp;&nbsp;&nbsp;&nbsp;(d) 0.0145 &nbsp;&nbsp;&nbsp;&nbsp;(e) 0.01625 &nbsp;&nbsp;&nbsp;&nbsp;(f) 0.0055 &nbsp;&nbsp;&nbsp;&nbsp;(f) 6.195&nbsp;&nbsp;&nbsp;&nbsp;(g) 0.00433 &nbsp;&nbsp;&nbsp;&nbsp;(h) 61.95 &nbsp;&nbsp;&nbsp;&nbsp;(i) 0.0433</p></li>
<li><p>2.25</p></li>
<li><p>7/15</p></li>
</ul></li>
<li><p><span id="ANS_32" label="ANS_32"></span></p>
<ul>
<li><p>0.2526</p></li>
<li><p>0.8047</p></li>
<li><p>0.4323</p></li>
</ul></li>
<li><p><span id="ANS_33" label="ANS_33"></span></p>
<ul>
<li>(a) <span class="math inline">\(f_x(x)=\frac{x}{9}e^{-x/3}\)</span> for <span class="math inline">\(x&gt; 0\)</span> &nbsp;&nbsp;&nbsp;&nbsp;(b) 0.4963</li>
</ul></li>
<li><p><span id="ANS_35" label="ANS_35"></span></p>
<ul>
<li><p>(a) 0 &nbsp;&nbsp;&nbsp;&nbsp;(b) -1.13 &nbsp;&nbsp;&nbsp;&nbsp;(c) <span class="math inline">\(\pm 0.32\)</span></p></li>
<li><p>(a) 0.0475 &nbsp;&nbsp;&nbsp;&nbsp;(b) 0.0475 &nbsp;&nbsp;&nbsp;&nbsp;(c) 0.2283 &nbsp;&nbsp;&nbsp;&nbsp;(d) 68.97 to 81.03 &nbsp;&nbsp;&nbsp;&nbsp;(e) 48 to 102 &nbsp;&nbsp;&nbsp;&nbsp;(f) 68.97</p></li>
<li><p>(a) 0.2119 &nbsp;&nbsp;&nbsp;&nbsp;(b) 0.0011</p></li>
<li><p>&nbsp;&nbsp;0.002</p></li>
</ul></li>
</ul>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>